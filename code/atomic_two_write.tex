\begin{BVerbatim}[commandchars=\\\{\}]
\PY{k}{def} \PY{n+nf}{atomic\PYZus{}two\PYZus{}write}\PY{p}{(}\PY{n}{a1}\PY{p}{,} \PY{n}{v1}\PY{p}{,} \PY{n}{a2}\PY{p}{,} \PY{n}{v2}\PY{p}{)}\PY{p}{:}
    \PY{n}{log\PYZus{}begin}\PY{p}{(}\PY{p}{)}
    \PY{n}{log\PYZus{}write}\PY{p}{(}\PY{n}{a1}\PY{p}{,} \PY{n}{v1}\PY{p}{)}
    \PY{n}{log\PYZus{}write}\PY{p}{(}\PY{n}{a2}\PY{p}{,} \PY{n}{v2}\PY{p}{)}
    \PY{n}{log\PYZus{}commit}\PY{p}{(}\PY{p}{)}
\end{BVerbatim}
